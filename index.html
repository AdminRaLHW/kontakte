<!DOCTYPE html>
<html lang="de" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kontakte | Lebenshilfswerk Waren</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js"></script>

    <link rel="stylesheet" href="style.css">
</head>
<body class="acc-default">

<!-- UI-Elemente außerhalb des gefilterten Wrappers -->
<div id="accOverlay" class="acc-overlay" onclick="toggleAccMenu()"></div>

<button class="acc-toggle-btn" onclick="toggleAccMenu()" aria-label="Barrierefreiheit Menü öffnen">
    <svg viewBox="0 0 24 24"><path d="M12 2c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2zm9 7h-6v13h-2v-6h-2v6H9V9H3V7h18v2z"/></svg>
</button>

<aside id="accSidebar" class="acc-sidebar" role="dialog" aria-labelledby="accTitle">
    <div class="acc-header">
        <h2 id="accTitle" style="margin:0; font-size: 1.1rem; font-weight: 900; text-transform: uppercase;">Barrierefreiheit</h2>
        <button class="close-acc" onclick="toggleAccMenu()" aria-label="Schließen">&times;</button>
    </div>

    <div class="acc-section">
        <label for="slider-font">Textgröße</label>
        <input type="range" id="slider-font" class="acc-slider" min="0.7" max="1.5" step="0.05" value="1">
    </div>

    <div class="acc-section">
        <label for="slider-line">Zeilenabstand</label>
        <input type="range" id="slider-line" class="acc-slider" min="1" max="2.2" step="0.1" value="1.5">
    </div>

    <div class="acc-section">
        <label for="slider-spacing">Zeichenabstand</label>
        <input type="range" id="slider-spacing" class="acc-slider" min="-0.5" max="5" step="0.5" value="0">
    </div>

    <hr style="width:100%; border: 0; border-top: 1px solid var(--border-ui); margin: 10px 0; opacity: 0.3;">

    <div class="acc-section">
        <label>Anzeige-Modus</label>
        <div class="theme-grid">
            <button class="acc-btn" onclick="setAccTheme('default')" id="btn-def">
                Standard
            </button>
            <button class="acc-btn" onclick="setAccTheme('grayscale')" id="btn-gray">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="10"/><path d="M12 2a10 10 0 0 0 0 20z" fill="currentColor"/></svg>
                Graustufen
            </button>
            <button class="acc-btn" onclick="setAccTheme('invert')" id="btn-inv">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z" fill="currentColor"/></svg>
                Invertiert
            </button>
            <button class="acc-btn" onclick="setAccTheme('high-contrast')" id="btn-high">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor"><circle cx="12" cy="12" r="10"/><path d="M12 6v12M6 12h12"/></svg>
                Kontrast
            </button>
        </div>
    </div>

    <button class="acc-btn" style="margin-top: auto; background: #d32f2f; color: white; border: none;" onclick="resetAcc()">
        Einstellungen zurücksetzen
    </button>
</aside>

<!-- Gesamter Seiteninhalt im Wrapper -->
<div id="app-wrapper">

    <div class="print-only">
        <div class="print-cover">
            <div class="cover-header">
                <img src="img/LHW Logo Trans.svg" alt="Logo" class="cover-logo">
                <div>
                    <h1>Kontaktverzeichnis</h1>
                    <p id="print-date" style="font-size: 14pt; color: #666; margin-top: 10px;">Datenstand: --</p>
                </div>
            </div>
            <div class="toc-container">
                <div class="toc-title">Farbleitsystem & Bereiche</div>
                <div id="print-toc"></div>
            </div>
            <div class="cover-footer">
                <span style="font-weight: 900; text-transform: uppercase; letter-spacing: 1px;">Lebenshilfswerk Waren gGmbH</span>
                <span id="print-footer-info"></span>
            </div>
        </div>
    </div>

    <header class="no-print">
        <div class="main-controls">
            <a href="https://lebenshilfswerk-waren.de" class="logo-link">
                <img src="img/LHW Logo Trans.svg" alt="LHW Logo" class="logo">
            </a>
            <div class="search-wrapper">
                <input type="text" id="search" onkeyup="handleSearch()" placeholder="Suchen nach Name, Bereich oder Abteilung...">
            </div>
        </div>
        <div class="action-controls">
            <button class="theme-btn" onclick="toggleTheme()" id="themeToggle">
                <svg id="sun-icon" class="btn-icon" style="display:none" viewBox="0 0 24 24"><path d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364-6.364l-.707.707M6.343 17.657l-.707.707m12.728 0l-.707-.707M6.343 6.343l-.707-.707M12 8a4 4 0 100 8 4 4 0 000-8z"/></svg>
                <svg id="moon-icon" class="btn-icon" viewBox="0 0 24 24"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
                <span id="theme-text" style="margin-left: 8px">Dunkel</span>
            </button>
            <button onclick="window.print()" class="print-btn">
                <svg class="btn-icon" viewBox="0 0 24 24"><path d="M6 9V2h12v7M6 18H4a2 2 0 01-2-2v-5a2 2 0 012-2h16a2 2 0 012 2v5a2 2 0 01-2 2h-2m-12 0v5h12v-5m-12-4h12"/></svg>
                Drucken
            </button>
        </div>
    </header>

    <div id="last-update" class="update-hint"></div>
    <main id="directory"></main>

    <footer class="no-print web-footer">
        <div style="font-weight: 800; text-transform: uppercase;">Lebenshilfswerk Waren gGmbH</div>
        <div id="web-footer-info"></div>
    </footer>

</div> <!-- Ende app-wrapper -->

<script src="script.js"></script>
</body>
</html>